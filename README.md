# sql_mediana

Get Mediana from numbers on MS SQL SERVER. Universal procedure

**МЕДИАНА** - число, стоящее посередине упорядоченного по возрастанию ряда чисел (в случае, если количество чисел нечётное). 
Если же количество чисел в ряду		чётно, то медианой ряда является полусумма двух стоящих посередине чисел упорядоченного по возрастанию ряда

Параметры:
1.	@tbl – Название таблицы /вложенный запрос типа
2.	@grp – поле или массив полей по которым будет происходить группировка (массив передается в кавычках через запятую)
3.	@val – числовые поля по которым будет происходить группировка, сортировка и поиск медианы (поиск медианы идет по первому столбцу из массива подробнее далее)
4.	@ord – поля для сортировки. Стоит учитывать, что итоговый результат будет зависеть от того как задана сортировка. В сортировку программно передаются поля группировки, затем поля которые будут указаны в сортировке (ниже по примерам будет яснее)
5.	@period – опциональный параметр (можно не задавать), но если задаете, то в него обязательно необходимо передать 4 параметра:
		1.	Начальная дата
		2.	Конечная дата
		3.	Название поля для которого задается дата
		4.	Тип данных в этом поле (date или int) – т.к. в разных таблицах мы строим поля даты то в формате то даты, то в формате строки, то в формате числа (ниже по примерам я разбираю все три случая). Для типа строки и даты необходимо указывать тип date, и только для числа - int
